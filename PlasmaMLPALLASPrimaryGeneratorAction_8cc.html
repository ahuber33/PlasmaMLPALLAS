<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PlasmaMLPALLAS: src/PlasmaMLPALLASPrimaryGeneratorAction.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PlasmaMLPALLAS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">PlasmaMLPALLASPrimaryGeneratorAction.cc File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the primary generator action for the PALLAS simulation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="PlasmaMLPALLASPrimaryGeneratorAction_8hh_source.html">PlasmaMLPALLASPrimaryGeneratorAction.hh</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PlasmaMLPALLASPrimaryGeneratorAction.cc:</div>
<div class="dyncontent">
<div class="center"><img src="PlasmaMLPALLASPrimaryGeneratorAction_8cc__incl.png" border="0" usemap="#asrc_2PlasmaMLPALLASPrimaryGeneratorAction_8cc" alt=""/></div>
<map name="asrc_2PlasmaMLPALLASPrimaryGeneratorAction_8cc" id="asrc_2PlasmaMLPALLASPrimaryGeneratorAction_8cc">
<area shape="rect" title="Implementation of the primary generator action for the PALLAS simulation." alt="" coords="2793,5,3003,45"/>
<area shape="rect" href="PlasmaMLPALLASPrimaryGeneratorAction_8hh.html" title=" " alt="" coords="2771,93,3025,133"/>
<area shape="poly" title=" " alt="" coords="2901,46,2901,79,2895,79,2895,46"/>
<area shape="rect" title=" " alt="" coords="1121,189,1377,214"/>
<area shape="poly" title=" " alt="" coords="2771,119,2517,125,2174,136,1784,155,1389,184,1338,190,1338,184,1388,179,1784,150,2174,131,2517,120,2771,114"/>
<area shape="rect" href="PlasmaMLPALLASRunAction_8hh.html" title=" " alt="" coords="1401,189,1624,214"/>
<area shape="poly" title=" " alt="" coords="2771,125,1638,195,1638,189,2771,120"/>
<area shape="rect" href="PlasmaMLPALLASPrimaryGeneratorMessenger_8hh.html" title=" " alt="" coords="2690,181,2943,221"/>
<area shape="poly" title=" " alt="" coords="2882,135,2846,173,2842,169,2878,132"/>
<area shape="rect" href="PlasmaMLPALLASOnnxParameters_8hh.html" title=" " alt="" coords="3263,269,3528,295"/>
<area shape="poly" title=" " alt="" coords="2916,132,2963,182,2988,205,3007,219,3050,234,3110,246,3250,265,3249,271,3109,251,3048,239,3005,224,2984,209,2960,186,2913,135"/>
<area shape="rect" title=" " alt="" coords="3019,189,3153,214"/>
<area shape="poly" title=" " alt="" coords="2940,131,3050,181,3048,186,2938,136"/>
<area shape="rect" title=" " alt="" coords="3178,189,3381,214"/>
<area shape="poly" title=" " alt="" coords="2982,131,3216,183,3215,188,2981,136"/>
<area shape="rect" href="PlasmaMLPALLASOnnxInference_8hh.html" title=" " alt="" coords="3513,189,3765,214"/>
<area shape="poly" title=" " alt="" coords="3025,127,3527,184,3527,190,3025,132"/>
<area shape="poly" title=" " alt="" coords="1624,191,2757,121,2757,126,1625,196"/>
<area shape="rect" title=" " alt="" coords="555,269,711,295"/>
<area shape="poly" title=" " alt="" coords="1444,217,1389,224,1204,241,1059,249,912,257,724,272,724,267,912,252,1059,244,1204,236,1388,219,1443,211"/>
<area shape="rect" title=" " alt="" coords="735,269,821,295"/>
<area shape="poly" title=" " alt="" coords="1443,217,1389,224,1235,239,1113,245,991,254,835,272,834,267,990,248,1113,240,1234,233,1388,219,1442,211"/>
<area shape="rect" title=" " alt="" coords="845,269,975,295"/>
<area shape="poly" title=" " alt="" coords="1440,217,1389,224,989,272,989,267,1388,219,1439,211"/>
<area shape="rect" title=" " alt="" coords="1000,269,1145,295"/>
<area shape="poly" title=" " alt="" coords="1449,217,1150,270,1149,264,1448,211"/>
<area shape="rect" title=" " alt="" coords="1170,269,1311,295"/>
<area shape="poly" title=" " alt="" coords="1474,217,1294,268,1293,263,1472,211"/>
<area shape="rect" title=" " alt="" coords="1336,269,1401,295"/>
<area shape="poly" title=" " alt="" coords="1493,217,1403,265,1401,260,1490,212"/>
<area shape="rect" title=" " alt="" coords="1426,269,1495,295"/>
<area shape="poly" title=" " alt="" coords="1507,216,1478,259,1474,256,1503,213"/>
<area shape="rect" title=" " alt="" coords="1520,269,1607,295"/>
<area shape="poly" title=" " alt="" coords="1522,213,1551,256,1546,259,1518,216"/>
<area shape="rect" title=" " alt="" coords="1631,269,1695,295"/>
<area shape="poly" title=" " alt="" coords="1536,212,1630,261,1628,265,1534,217"/>
<area shape="rect" href="PlasmaMLPALLASGeometryConstruction_8hh.html" title=" " alt="" coords="1719,269,2023,295"/>
<area shape="poly" title=" " alt="" coords="1565,211,1806,264,1805,269,1564,217"/>
<area shape="rect" href="PlasmaMLPALLASEventAction_8hh.html" title=" " alt="" coords="2047,269,2282,295"/>
<area shape="poly" title=" " alt="" coords="1608,211,2057,265,2056,270,1607,217"/>
<area shape="rect" href="Geometry_8hh.html" title=" " alt="" coords="439,350,544,375"/>
<area shape="poly" title=" " alt="" coords="1719,297,1707,297,1532,304,1383,305,1129,301,1007,301,877,307,729,321,556,345,539,349,537,344,555,340,729,315,877,301,1007,296,1129,295,1383,300,1532,299,1707,292,1719,291"/>
<area shape="rect" title=" " alt="" coords="567,350,805,375"/>
<area shape="poly" title=" " alt="" coords="1719,297,1707,297,1457,310,1262,316,1067,325,817,345,771,351,770,345,816,340,1066,320,1261,311,1457,304,1707,292,1719,291"/>
<area shape="rect" title=" " alt="" coords="829,350,975,375"/>
<area shape="poly" title=" " alt="" coords="1719,297,1707,297,1505,308,1347,313,1189,322,988,345,962,350,961,345,987,340,1189,317,1346,307,1504,302,1707,292,1719,291"/>
<area shape="rect" title=" " alt="" coords="999,350,1143,375"/>
<area shape="poly" title=" " alt="" coords="1721,297,1386,324,1156,345,1131,350,1130,344,1155,340,1386,318,1721,292"/>
<area shape="rect" title=" " alt="" coords="1167,350,1349,375"/>
<area shape="poly" title=" " alt="" coords="1755,297,1570,318,1361,345,1331,350,1330,345,1360,340,1569,313,1755,292"/>
<area shape="rect" title=" " alt="" coords="1373,350,1570,375"/>
<area shape="poly" title=" " alt="" coords="1814,297,1543,350,1542,345,1813,292"/>
<area shape="rect" title=" " alt="" coords="1594,350,1783,375"/>
<area shape="poly" title=" " alt="" coords="1846,297,1729,347,1727,342,1844,292"/>
<area shape="rect" title=" " alt="" coords="1808,350,1935,375"/>
<area shape="poly" title=" " alt="" coords="1874,295,1874,336,1869,336,1869,295"/>
<area shape="rect" title=" " alt="" coords="1959,350,2106,375"/>
<area shape="poly" title=" " alt="" coords="1896,292,1998,342,1996,347,1894,297"/>
<area shape="rect" title=" " alt="" coords="2131,350,2303,375"/>
<area shape="poly" title=" " alt="" coords="1922,292,2154,344,2153,350,1921,297"/>
<area shape="rect" title=" " alt="" coords="2327,350,2464,375"/>
<area shape="poly" title=" " alt="" coords="1977,292,2137,312,2314,340,2336,344,2335,350,2314,345,2136,317,1977,297"/>
<area shape="rect" title=" " alt="" coords="2489,350,2633,375"/>
<area shape="poly" title=" " alt="" coords="2006,292,2264,316,2476,340,2500,344,2499,350,2475,345,2264,321,2005,297"/>
<area shape="rect" href="PlasmaMLPALLASMagneticField_8hh.html" title=" " alt="" coords="2657,350,2905,375"/>
<area shape="poly" title=" " alt="" coords="2024,291,2362,316,2645,340,2691,346,2690,351,2644,345,2362,321,2023,297"/>
<area shape="rect" title=" " alt="" coords="5,431,95,456"/>
<area shape="poly" title=" " alt="" coords="439,375,109,433,108,428,438,370"/>
<area shape="rect" title=" " alt="" coords="119,431,205,456"/>
<area shape="poly" title=" " alt="" coords="444,378,219,431,217,426,443,373"/>
<area shape="rect" title=" " alt="" coords="229,431,396,456"/>
<area shape="poly" title=" " alt="" coords="466,378,352,428,350,423,464,373"/>
<area shape="rect" title=" " alt="" coords="420,431,563,456"/>
<area shape="poly" title=" " alt="" coords="494,376,494,417,489,417,489,376"/>
<area shape="rect" title=" " alt="" coords="587,431,715,456"/>
<area shape="poly" title=" " alt="" coords="516,373,617,422,615,427,513,378"/>
<area shape="rect" title=" " alt="" coords="740,431,899,456"/>
<area shape="poly" title=" " alt="" coords="529,373,556,380,751,425,750,430,555,385,528,378"/>
<area shape="rect" title=" " alt="" coords="923,431,1062,456"/>
<area shape="poly" title=" " alt="" coords="528,373,556,380,653,398,730,408,910,428,910,433,729,413,652,403,555,385,526,378"/>
<area shape="rect" title=" " alt="" coords="2929,350,3097,375"/>
<area shape="poly" title=" " alt="" coords="2282,291,2294,292,2469,304,2606,311,2742,320,2917,340,2947,345,2946,350,2916,345,2742,325,2606,316,2469,309,2294,297,2282,296"/>
<area shape="rect" href="PlasmaMLPALLASQuadrupoleUtils_8hh.html" title=" " alt="" coords="3121,343,3333,383"/>
<area shape="poly" title=" " alt="" coords="2282,291,2294,292,2521,305,2699,311,2878,320,3108,340,3108,345,2878,325,2699,317,2521,310,2294,297,2282,296"/>
<area shape="rect" title=" " alt="" coords="2306,269,2485,295"/>
<area shape="poly" title=" " alt="" coords="2716,224,2471,269,2470,264,2715,219"/>
<area shape="rect" title=" " alt="" coords="2509,269,2695,295"/>
<area shape="poly" title=" " alt="" coords="2766,224,2647,267,2645,262,2764,219"/>
<area shape="rect" title=" " alt="" coords="2719,269,2914,295"/>
<area shape="poly" title=" " alt="" coords="2819,222,2819,255,2814,255,2814,222"/>
<area shape="rect" title=" " alt="" coords="2938,269,3069,295"/>
<area shape="poly" title=" " alt="" coords="2862,219,2964,261,2962,266,2860,224"/>
<area shape="poly" title=" " alt="" coords="2944,217,3298,265,3297,270,2943,222"/>
<area shape="rect" title=" " alt="" coords="3093,269,3239,295"/>
<area shape="poly" title=" " alt="" coords="2901,219,3102,264,3101,269,2900,224"/>
<area shape="rect" title=" " alt="" coords="3362,350,3429,375"/>
<area shape="poly" title=" " alt="" coords="3398,295,3398,336,3393,336,3393,295"/>
<area shape="rect" title=" " alt="" coords="3552,269,3727,295"/>
<area shape="poly" title=" " alt="" coords="3642,214,3642,255,3637,255,3637,214"/>
<area shape="rect" title=" " alt="" coords="3751,269,3840,295"/>
<area shape="poly" title=" " alt="" coords="3663,212,3762,261,3759,266,3661,216"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac73d1ee1f1c3258111fe944216951eea" id="r_ac73d1ee1f1c3258111fe944216951eea"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PlasmaMLPALLASPrimaryGeneratorAction_8cc.html#ac73d1ee1f1c3258111fe944216951eea">currentParticleNumber</a> {0}</td></tr>
<tr class="memdesc:ac73d1ee1f1c3258111fe944216951eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global counter of generated particles (atomic to support multithreading).  <br /></td></tr>
<tr class="separator:ac73d1ee1f1c3258111fe944216951eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ce9ae55f21917ea1231b450e1a31fb" id="r_a50ce9ae55f21917ea1231b450e1a31fb"><td class="memItemLeft" align="right" valign="top">G4UImanager *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PlasmaMLPALLASPrimaryGeneratorAction_8cc.html#a50ce9ae55f21917ea1231b450e1a31fb">UI</a> = G4UImanager::GetUIpointer()</td></tr>
<tr class="memdesc:a50ce9ae55f21917ea1231b450e1a31fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global pointer to the Geant4 UI manager.  <br /></td></tr>
<tr class="separator:a50ce9ae55f21917ea1231b450e1a31fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the primary generator action for the PALLAS simulation. </p>
<p>This file implements the <code><a class="el" href="classPlasmaMLPALLASPrimaryGeneratorAction.html" title="Defines the primary generator action for the simulation.">PlasmaMLPALLASPrimaryGeneratorAction</a></code> class, which handles the generation of primary particles for Geant4 events in the PALLAS project.</p>
<p>Two generation modes are supported:</p><ol type="1">
<li><b>ONNX model inference</b>: Beam parameters (energy, charge, emittance, transverse positions, and momenta) are predicted by a neural network model and used to configure the particle gun.</li>
<li><b>Geant4 GeneralParticleSource (GPS)</b>: Standard Geant4 particle generation.</li>
</ol>
<p>Features:</p><ul>
<li>Thread-safe generation using atomic counters and per-thread UI handling.</li>
<li>Progress display with estimated remaining simulation time.</li>
<li>Energy smearing with Gaussian fluctuations.</li>
</ul>
<p>Usage:</p><ul>
<li>Instantiate the class and assign it to the Geant4 run manager via <code>SetUserAction</code>.</li>
<li>Configure the ONNX model or GPS via the associated messenger.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Multithreading is supported; thread 0 handles progress display.</dd></dl>
<dl class="section author"><dt>Authors</dt><dd>Arnaud HUBER <a href="#" onclick="location.href='mai'+'lto:'+'hub'+'er'+'@lp'+'2i'+'b.i'+'n2'+'p3.'+'fr'; return false;">huber<span class="obfuscator">.nosp@m.</span>@lp2<span class="obfuscator">.nosp@m.</span>ib.in<span class="obfuscator">.nosp@m.</span>2p3.<span class="obfuscator">.nosp@m.</span>fr</a> </dd>
<dd>
Alexei SYTOV <a href="#" onclick="location.href='mai'+'lto:'+'syt'+'ov'+'@in'+'fn'+'.it'; return false;">sytov<span class="obfuscator">.nosp@m.</span>@inf<span class="obfuscator">.nosp@m.</span>n.it</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>PALLAS Project - GEANT4 Collaboration </dd></dl>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="ac73d1ee1f1c3258111fe944216951eea" name="ac73d1ee1f1c3258111fe944216951eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac73d1ee1f1c3258111fe944216951eea">&#9670;&#160;</a></span>currentParticleNumber</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; currentParticleNumber {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global counter of generated particles (atomic to support multithreading). </p>

</div>
</div>
<a id="a50ce9ae55f21917ea1231b450e1a31fb" name="a50ce9ae55f21917ea1231b450e1a31fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ce9ae55f21917ea1231b450e1a31fb">&#9670;&#160;</a></span>UI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4UImanager* UI = G4UImanager::GetUIpointer()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global pointer to the Geant4 UI manager. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
